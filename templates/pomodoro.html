<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pomodoro Timer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f8ff; /* Light blue background */
        }
        .content {
            margin-left: 22%; /* Adjusted for sidebar */
            padding: 20px;
        }
        ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            width: 20%;
            background-color: #333; /* Dark sidebar */
            position: fixed;
            height: 100%;
            overflow: auto;
        }
        li a {
            display: block;
            color: white;
            padding: 10px 16px;
            text-decoration: none;
            font-size: 40px;
        }
        li a.active {
            background-color: #04AA6D;
            color: white;
        }
        li a:hover:not(.active) {
            background-color: #575757;
            color: white;
        }
    </style>
</head>
<body>

    <ul>
        <li><a class="index" href="/">Koduleht</a></li>
        <li><a href="pomodoro" class="active">Taimer</a></li>
        <li><a href="todolist">To-do list</a></li>
        <li><a href="settings">Settings</a></li>
    </ul>
    <div class="content">
        
        <h1>Pomodoro Timer</h1>
        <p>Aega jäänud:</p>
        <div id="timer">0:10</div>  <!-- Algne aeg 10 sekundit -->
        <button id="start-btn">Start</button>

    </div>
    
    <!-- Audio element for the alarm sound -->
    <audio id="alarm-sound" src="/static/alarm.mp3"></audio>

    <script>
        let starttime = 10;
        let timeLeft = 10;  // Seconds
        const timerElement = document.getElementById("timer");
        const alarmSound = document.getElementById("alarm-sound");
        const startBtn = document.getElementById("start-btn");

        startBtn.addEventListener("click", () => {
            function updateTimer() {
                let minutes = Math.floor(timeLeft / 60);
                let seconds = timeLeft % 60;
                timerElement.innerHTML = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                
                if (timeLeft > 0) {
                    timeLeft--;
                } else {
                    clearInterval(timerInterval);
                    timerElement.innerHTML = "Aeg läbi!";
                    alarmSound.play().catch(error => {
                        console.error("Audio playback failed:", error);
                    });
                }
            }
            
            const timerInterval = setInterval(updateTimer, 1000);
        });
    </script>
</body>
</html>